# LLM-Parser: –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–µ—á–∞—Ç–Ω—ã—Ö –ø–ª–∞—Ç

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–µ—á–∞—Ç–Ω—ã—Ö –ø–ª–∞—Ç –∏–∑ Excel —Ñ–∞–π–ª–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π (LLM) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –ë–∏—Ç—Ä–∏–∫—Å24.

## –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Mistral AI** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –ø–µ—á–∞—Ç–Ω—ã—Ö –ø–ª–∞—Ç–∞—Ö –∏–∑ –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö Excel —Ñ–∞–π–ª–æ–≤. –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Ö –≤ —Ñ–æ—Ä–º–∞—Ç –ë–∏—Ç—Ä–∏–∫—Å24 –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ CRM —á–µ—Ä–µ–∑ REST API.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ó–∞–≥—Ä—É–∑–∫–∞ Excel** ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** ‚Üí –°–∏—Å—Ç–µ–º–∞ —á–∏—Ç–∞–µ—Ç –≤—Å–µ –ª–∏—Å—Ç—ã Excel –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ —Ç–µ–∫—Å—Ç
3. **LLM-–ø–∞—Ä—Å–∏–Ω–≥** ‚Üí Mistral AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ PCB
4. **–ú–∞–ø–ø–∏–Ω–≥ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤** ‚Üí –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "FR4", "HASL") –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ ID —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ –ë–∏—Ç—Ä–∏–∫—Å24:
   - **–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:** ID –±–µ—Ä—É—Ç—Å—è –∏–∑ –ë–î (`bitrix24_dictionaries`), –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
   - **–õ–æ–∫–∞–ª—å–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è fallback-—Å–ª–æ–≤–∞—Ä–∏ –∏–∑ –∫–æ–¥–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
5. **–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π** ‚Üí –í—Å–µ 12 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∏–∑ Excel (–º–∞—Ç–µ—Ä–∏–∞–ª, —Å–ª–æ–∏, –ø–æ–∫—Ä—ã—Ç–∏–µ –∏ —Ç.–¥.)
   - –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ Excel (Order unit, PCB type –∏ –¥—Ä.)
6. **–≠–∫—Å–ø–æ—Ä—Ç/–û—Ç–ø—Ä–∞–≤–∫–∞** ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ CSV/XLSX/JSON –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–∏—Ç—Ä–∏–∫—Å24

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM (Mistral AI) –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel
- üìä **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞** - CSV, XLSX, JSON, JSON –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24
- üîó **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24** - –ü—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ REST API
- üóÇÔ∏è **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏–∑ –ë–î** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π** - –í—Å–µ 12 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ö° **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤** - TTL-–∫—ç—à –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞–º (15 –º–∏–Ω—É—Ç)
- üîÑ **Fallback-—Ä–µ–∂–∏–º** - –†–∞–±–æ—Ç–∞ –±–µ–∑ –ë–î –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- üåê **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –£–¥–æ–±–Ω—ã–π Gradio –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
LLM-parser-PCB/
‚îú‚îÄ‚îÄ main.py                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ README.MD                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .gitignore                   # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
‚îÇ
‚îî‚îÄ‚îÄ app/                         # –ú–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ config.py                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (API –∫–ª—é—á–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    ‚îú‚îÄ‚îÄ model.py                 # Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ LLM
    ‚îú‚îÄ‚îÄ utils.py                 # –§—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ LLM
    ‚îú‚îÄ‚îÄ logger.py                # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    ‚îú‚îÄ‚îÄ interface.py             # Gradio –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    ‚îú‚îÄ‚îÄ bitrix24.py              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24 REST API –∏ –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π
    ‚îú‚îÄ‚îÄ bitrix24_dictionaries.py # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ (fallback –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
    ‚îî‚îÄ‚îÄ db_dictionaries.py        # –ú–æ–¥—É–ª—å —Ä–∞–±–æ—Ç—ã —Å –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- API –∫–ª—é—á Mistral AI
- Webhook URL –∏–ª–∏ —Ç–æ–∫–µ–Ω –ë–∏—Ç—Ä–∏–∫—Å24 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/kornelikkk2/LLM-parser-PCB-v3.git
cd LLM-parser-PCB-v3
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

**Linux/Mac:**
```bash
python -m venv venv
source venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ë–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `MISTRAL_API_KEY` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è!

#### –°–ø–æ—Å–æ–± 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ `.env` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä—è–¥–æ–º —Å `main.py`)
2. –î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–µ–≥–æ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: API –∫–ª—é—á Mistral AI
MISTRAL_API_KEY=–≤–∞—à_–∫–ª—é—á_mistral_ai_–∑–¥–µ—Å—å

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ë–∏—Ç—Ä–∏–∫—Å24 Webhook URL
BITRIX24_WEBHOOK_URL=https://fineline.bitrix24.ru/rest/6/–≤–∞—à_—Ç–æ–∫–µ–Ω/crm.item.add

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
DICTIONARIES_DB_URL=postgresql://user:password@host:port/dbname
```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑
- –§–∞–π–ª `.env` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è Git (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö –æ–¥–∏–Ω–∞–∫–æ–≤–æ

#### –°–ø–æ—Å–æ–± 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

**Windows (PowerShell):**
```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
$env:MISTRAL_API_KEY="–≤–∞—à_–∫–ª—é—á_mistral_ai"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
echo $env:MISTRAL_API_KEY

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–æ–π –∂–µ —Å–µ—Å—Å–∏–∏ PowerShell
fastapi run main.py
```

**Windows (cmd):**
```cmd
set MISTRAL_API_KEY=–≤–∞—à_–∫–ª—é—á_mistral_ai
echo %MISTRAL_API_KEY%
fastapi run main.py
```

**Linux/Mac:**
```bash
export MISTRAL_API_KEY=–≤–∞—à_–∫–ª—é—á_mistral_ai
echo $MISTRAL_API_KEY
fastapi run main.py
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** 
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É, –¥–µ–π—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
- –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è
- –ù—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ

#### –°–ø–æ—Å–æ–± 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (Windows)

1. –û—Ç–∫—Ä–æ–π—Ç–µ **–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** ‚Üí **–°–∏—Å—Ç–µ–º–∞** ‚Üí **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã**
2. –ù–∞–∂–º–∏—Ç–µ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã**
3. –í —Ä–∞–∑–¥–µ–ª–µ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –Ω–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å**
4. –ò–º—è: `MISTRAL_API_KEY`, –ó–Ω–∞—á–µ–Ω–∏–µ: `–≤–∞—à_–∫–ª—é—á_mistral_ai`
5. –ù–∞–∂–º–∏—Ç–µ **–û–ö** –∏ **–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª/IDE**

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# Windows PowerShell
echo $env:MISTRAL_API_KEY

# Windows cmd
echo %MISTRAL_API_KEY%

# Linux/Mac
echo $MISTRAL_API_KEY

# –ò–ª–∏ —á–µ—Ä–µ–∑ Python
python -c "import os; print('MISTRAL_API_KEY:', 'SET' if os.getenv('MISTRAL_API_KEY') else 'NOT SET')"
```

–ï—Å–ª–∏ –≤—ã–≤–æ–¥–∏—Ç `NOT SET` –∏–ª–∏ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–Ω–æ–≤–æ –∏ **–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª/IDE**.

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ –∏–∑ –ë–î (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

#### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É** –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ ID —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ –ë–∏—Ç—Ä–∏–∫—Å24:

1. **–ü—Ä–æ–¥–∞–∫—à–µ–Ω (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):** –ï—Å–ª–∏ –∑–∞–¥–∞–Ω–∞ `DICTIONARIES_DB_URL`, —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î
   - –ë–î –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –ë–∏—Ç—Ä–∏–∫—Å24
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è TTL-–∫—ç—à (15 –º–∏–Ω—É—Ç) –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
   - –ù–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞

2. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (fallback):** –ï—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–æ–≤–∞—Ä–∏ –∏–∑ `app/bitrix24_dictionaries.py`
   - –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –§–∞–π–Ω–õ–∞–π–Ω–∞:**

```bash
# –§–æ—Ä–º–∞—Ç SQLAlchemy URL –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –ë–î:
# PostgreSQL: postgresql://user:password@host:port/dbname
# MySQL: mysql+pymysql://user:password@host:port/dbname
# MS SQL: mssql+pyodbc://user:password@host:port/dbname?driver=ODBC+Driver+17+for+SQL+Server

export DICTIONARIES_DB_URL="postgresql://user:password@localhost:5432/bitrix24_db"
```

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

- `DICTIONARIES_CACHE_TTL_SECONDS` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 900) - –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
- `USE_DB_DICTIONARIES=0` - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ë–î –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback-—Å–ª–æ–≤–∞—Ä–∏

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã –ë–î

–û–∂–∏–¥–∞–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ –∏–ª–∏ VIEW `bitrix24_dictionaries` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å—Ç–æ–ª–±—Ü–∞–º–∏:

| –°—Ç–æ–ª–±–µ—Ü | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|-----|----------|--------|
| `param_id` | int | ID —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –ë–∏—Ç—Ä–∏–∫—Å24 (IBLOCK_ID) | 56 (–¥–ª—è Materials) |
| `param` | text | –ù–∞–∑–≤–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ | "Material" |
| `item_id` | int | ID —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ (–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –ë–∏—Ç—Ä–∏–∫—Å24) | 6281 |
| `item` | text | –¢–µ–∫—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ | "FR4" |

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î:**
```
param_id | param              | item_id | item
---------|--------------------|---------|----------
56       | Material           | 6281    | FR4
56       | Material           | 6282    | FR-4
74       | Finish Type        | 7010    | HASL
74       | Finish Type        | 7011    | ENIG
54       | No of Layers       | 6784    | 4
54       | No of Layers       | 6785    | 6
```

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ë–∏—Ç—Ä–∏–∫—Å24 –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω—ã –∏–∑ Excel (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Order unit", "PCB type"). –î–ª—è –Ω–∏—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# Order unit (IBLOCK_ID=50)
export BITRIX24_DEFAULT_ORDER_UNIT_ID=5256

# PCB type (IBLOCK_ID=52)
export BITRIX24_DEFAULT_PCB_TYPE_ID=6610

# Peelable SM (IBLOCK_ID=86)
export BITRIX24_DEFAULT_PEELABLE_SM_ID=6014

# Production Unit (IBLOCK_ID=160)
export BITRIX24_DEFAULT_PRODUCTION_UNIT_ID=6270
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** 
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–∏ ID —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –≤–∞—à–µ–π –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
- –ï—Å–ª–∏ ID –Ω–µ–≤–µ—Ä–Ω—ã–µ, –ë–∏—Ç—Ä–∏–∫—Å24 –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞
- –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `app/config.py` –∏–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 7. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

#### Mistral AI API Key
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Mistral AI](https://mistral.ai/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª API Keys
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ

#### –ë–∏—Ç—Ä–∏–∫—Å24 Webhook URL
1. –í–æ–π–¥–∏—Ç–µ –≤ –ë–∏—Ç—Ä–∏–∫—Å24 –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º ‚Üí –î—Ä—É–≥–∏–µ ‚Üí –í—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫**
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –≤–µ–±—Ö—É–∫:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: –Ω–∞–ø—Ä–∏–º–µ—Ä, "PCB Parser"
   - –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ (–º–∏–Ω–∏–º—É–º: CRM)
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π URL (—Ñ–æ—Ä–º–∞—Ç: `https://fineline.bitrix24.ru/rest/6/<token>/crm.item.add`)

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: FastAPI CLI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
fastapi run main.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Uvicorn

```bash
uvicorn main:app
```

### –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** http://localhost:8000/
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:8000/docs

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

#### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
fastapi run main.py
```

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:8000/**

#### –®–∞–≥ 2: –ü–∞—Ä—Å–∏–Ω–≥ Excel —Ñ–∞–π–ª–∞

1. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–≥—Ä—É–∑–∏—Ç—å Excel —Ñ–∞–π–ª"** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª (.xlsx –∏–ª–∏ .xls)
2. –ù–∞–∂–º–∏—Ç–µ **"–ü–∞—Ä—Å–∏—Ç—å Excel –¥–∞–Ω–Ω—ã–µ"**
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-30 —Å–µ–∫—É–Ω–¥ –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è LLM)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏:**
- –°–∏—Å—Ç–µ–º–∞ —á–∏—Ç–∞–µ—Ç –≤—Å–µ –ª–∏—Å—Ç—ã Excel
- –£–¥–∞–ª—è–µ—Ç –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ —Å—Ç–æ–ª–±—Ü—ã
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ç–µ–∫—Å—Ç
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ Mistral AI –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ ID —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (–∏–∑ –ë–î –∏–ª–∏ fallback)
- –ó–∞–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (–≤–∫–ª—é—á–∞—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

#### –®–∞–≥ 3: –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:

- **–¢–∞–±–ª–∏—Ü—É** —Å —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ (–≤ —Ñ–æ—Ä–º–∞—Ç–µ "–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ")
- **–ö–Ω–æ–ø–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è** –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–æ–≤:
  - **CSV** - –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ Excel
  - **XLSX** - –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - **JSON** - –æ–±—â–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
  - **JSON –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24** - –≥–æ—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ CRM

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- –í—Å–µ –ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –ø–æ–∫—Ä—ã—Ç–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–µ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–∏ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω—ã —Ä–∞–∑–º–µ—Ä—ã –ø–ª–∞—Ç—ã –∏ –ø–∞–Ω–µ–ª–∏

#### –®–∞–≥ 4: –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –ë–∏—Ç—Ä–∏–∫—Å24

**–í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `BITRIX24_WEBHOOK_URL`
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –ë–∏—Ç—Ä–∏–∫—Å24"**
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞:
   - ‚úÖ **–£—Å–ø–µ—Ö:** "–£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ë–∏—Ç—Ä–∏–∫—Å24! ID —ç–ª–µ–º–µ–Ω—Ç–∞: 151514"
   - ‚ùå **–û—à–∏–±–∫–∞:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook

**–í–∞—Ä–∏–∞–Ω—Ç B: –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**

1. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª **"JSON –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24"**
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑:
   - **Postman:** –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∫ POST –∑–∞–ø—Ä–æ—Å
   - **curl:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –Ω–∏–∂–µ
   - **–î—Ä—É–≥–æ–π HTTP –∫–ª–∏–µ–Ω—Ç**

**–ü—Ä–∏–º–µ—Ä curl:**
```bash
curl --location 'https://fineline.bitrix24.ru/rest/6/<–≤–∞—à_—Ç–æ–∫–µ–Ω>/crm.item.add' \
--header 'Content-Type: application/json' \
--data @–ø—É—Ç—å_–∫_—Ñ–∞–π–ª—É_bitrix24.json
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ –ë–∏—Ç—Ä–∏–∫—Å24

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
2. **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π** - –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö PCB –≤ —Ñ–æ—Ä–º–∞—Ç –ø–æ–ª–µ–π –ë–∏—Ç—Ä–∏–∫—Å24
3. **–ü–æ–∏—Å–∫ ID —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤** - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è:
   - –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫—ç—à (TTL 15 –º–∏–Ω—É—Ç)
   - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∑–∞–ø—Ä–æ—Å –∫ –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
   - –ï—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback-—Å–ª–æ–≤–∞—Ä—å
4. **HTTP –∑–∞–ø—Ä–æ—Å** - POST –∫ `crm.item.add` —Å –ø–æ–ª–Ω—ã–º payload
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞** - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ

## –ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–µ—á–∞—Ç–Ω—ã—Ö –ø–ª–∞—Ç:

- **–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏** - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –ø–ª–∞—Ç—ã
- **–ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—á–∞—Ç–Ω–æ–π –ø–ª–∞—Ç—ã** - –ò–º—è/–Ω–æ–º–µ—Ä –ø–ª–∞—Ç—ã
- **–ú–∞—Ç–µ—Ä–∏–∞–ª –æ—Å–Ω–æ–≤–∞–Ω–∏—è** - –¢–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (FR4, FR-4 –∏ —Ç.–¥.)
- **–¢–æ–ª—â–∏–Ω–∞ —Ñ–æ–ª—å–≥–∏** - –¢–æ–ª—â–∏–Ω–∞ –º–µ–¥–Ω–æ–≥–æ —Å–ª–æ—è
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–µ–≤** - –ß–∏—Å–ª–æ —Å–ª–æ–µ–≤ –ø–ª–∞—Ç—ã
- **–†–∞–∑–º–µ—Ä –ø–ª–∞—Ç—ã** - –î–ª–∏–Ω–∞ –∏ —à–∏—Ä–∏–Ω–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥)
- **–¢–æ–ª—â–∏–Ω–∞ –ø–ª–∞—Ç—ã** - –¢–æ–ª—â–∏–Ω–∞ –≤ –º–º
- **–ü–∞–Ω–µ–ª–∏–∑–∞—Ü–∏—è** - –†–∞–∑–º–µ—Ä—ã –ø–∞–Ω–µ–ª–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥)
- **–§–∏–Ω–∏—à–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** - –¢–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è (HASL, ENIG –∏ —Ç.–¥.)
- **–¶–≤–µ—Ç –ø–∞—è–ª—å–Ω–æ–π –º–∞—Å–∫–∏** - –¶–≤–µ—Ç –º–∞—Å–∫–∏
- **–ú–µ—Ç–∞–ª–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∞—è** - –ù–∞–ª–∏—á–∏–µ –º–µ—Ç–∞–ª–ª–∏–∑–∞—Ü–∏–∏
- –ò –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24

### –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π

–ü—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç –ø–æ–ª–µ–π –ë–∏—Ç—Ä–∏–∫—Å24. –í—Å–µ–≥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è **12 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π** + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è)

| –ü–æ–ª–µ PCB | –ü–æ–ª–µ –ë–∏—Ç—Ä–∏–∫—Å24 | –¢–∏–ø | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö |
|----------|----------------|-----|-----------------|
| `board_name` | `ufCrm24_1709799376061` (OEM PN) | string | –ò–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ Excel |
| `base_material` | `ufCrm24_1707838248` (Materials) | iblock_element | Excel ‚Üí –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (IBLOCK_ID=56) |
| `layer_count` | `ufCrm24_1709815185` (No of Layers) | iblock_element | Excel ‚Üí –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (IBLOCK_ID=54) |
| `coverage_type` | `ufCrm24_1707768819` (Finish Type) | iblock_element | Excel ‚Üí –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (IBLOCK_ID=74) |
| `foil_thickness` | `ufCrm24_1707838441` (Max Copper) | iblock_element | Excel ‚Üí –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (IBLOCK_ID=62) |
| ‚Äî | `ufCrm24_1707838030` (Order unit) | iblock_element | **–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** (IBLOCK_ID=50) |
| ‚Äî | `ufCrm24_1707838074` (PCB type) | iblock_element | **–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** (IBLOCK_ID=52) |
| ‚Äî | `ufCrm24_1707839629` (Peelable SM) | iblock_element | **–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** (IBLOCK_ID=86) |
| ‚Äî | `ufCrm24_1707849863` (Production Unit) | iblock_element | **–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** (IBLOCK_ID=160) |
| `board_size` | `ufCrm24_1708353384301` (Length), `ufCrm24_1708353402068` (Width) | double | –ü–∞—Ä—Å–∏–Ω–≥ –∏–∑ Excel |
| ‚Äî | `ufCrm24_1708374728464` (Board Thickness) | double | –ò–∑ Excel –∏–ª–∏ 1.6 –º–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| ‚Äî | `ufCrm24_1709799393816` (OEM Description) | string | –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–∞/—Å–ª–æ–µ–≤/–ø–æ–∫—Ä—ã—Ç–∏—è |
| ‚Äî | `ufCrm24_1709799420584` (Rev.) | string | –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ |

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è (–∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–∞–Ω–Ω—ã—Ö)

| –ü–æ–ª–µ PCB | –ü–æ–ª–µ –ë–∏—Ç—Ä–∏–∫—Å24 | –¢–∏–ø |
|----------|----------------|-----|
| `panelization` | `ufCrm24_1708375852081` (Panel Length), `ufCrm24_1708375871512` (Panel Width) | double |
| `edge_plating` | `ufCrm24_1707839110` (Edge plating) | iblock_element |
| `solder_mask_colour` | (Solder Mask Color) | iblock_element |

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–∞–ø–ø–∏–Ω–≥ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ Excel:** LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "FR4", "HASL", "4 —Å–ª–æ—è")

2. **–ü–æ–∏—Å–∫ ID –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞—Ö:**
   ```
   –¢–µ–∫—Å—Ç "FR4" ‚Üí –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí –ü–æ–∏—Å–∫ –≤ –ë–î (param_id=56) ‚Üí item_id=6281
   ```

3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:**
   - **1-–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (–µ—Å–ª–∏ `DICTIONARIES_DB_URL` –∑–∞–¥–∞–Ω–∞)
     - –ö—ç—à –Ω–∞ 15 –º–∏–Ω—É—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
     - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
   - **2-–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Fallback-—Å–ª–æ–≤–∞—Ä–∏ –∏–∑ `app/bitrix24_dictionaries.py`
     - –¢–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
     - –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

4. **–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞:**
   - –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç)
   - –ù–µ—á–µ—Ç–∫–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–ø–æ–¥—Å—Ç—Ä–æ–∫–∞, –æ–±—â–∏–µ —Å–ª–æ–≤–∞)
   - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö, –ø–æ–ª–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–∏–º–µ—Ä—ã –º–∞–ø–ø–∏–Ω–≥–∞:**
- `"FR4"` –∏–ª–∏ `"FR-4"` ‚Üí `6281` (Materials, IBLOCK_ID=56)
- `"HASL"` –∏–ª–∏ `"HASL Lead-Free"` ‚Üí `7010` (Finish Type, IBLOCK_ID=74)
- `"4"` –∏–ª–∏ `"4 —Å–ª–æ—è"` ‚Üí `6784` (No of Layers, IBLOCK_ID=54)

## –§–æ—Ä–º–∞—Ç JSON –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON —Ñ–∞–π–ª –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç:

```json
{
  "entityTypeId": 182,
  "fields": {
    "ufCrm24_1709799376061": "OEM-12345",
    "ufCrm24_1707768819": 7010,
    "ufCrm24_1707838248": 6281,
    "ufCrm24_1709815185": 6784,
    "ufCrm24_1708374728464": 1.6,
    "ufCrm24_1708353384301": 150.0,
    "ufCrm24_1708353402068": 100.0
  }
}
```

–≠—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç –≥–æ—Ç–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –ë–∏—Ç—Ä–∏–∫—Å24 —á–µ—Ä–µ–∑ REST API –º–µ—Ç–æ–¥ `crm.item.add`.

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö –ø—Ä–∏—á–∏–Ω—ã

#### 1. –û—à–∏–±–∫–∞ 401 Unauthorized (Mistral AI)

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Mistral API –≤–µ—Ä–Ω—É–ª 401 Unauthorized. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è 
`MISTRAL_API_KEY` –∑–∞–¥–∞–Ω–∞ –∏ –∫–ª—é—á –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω.
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `MISTRAL_API_KEY`
- –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –∏—Å—Ç–µ–∫—à–∏–π API –∫–ª—é—á
- –ö–ª—é—á –Ω–µ –±—ã–ª –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:
   ```bash
   # Windows PowerShell
   echo $env:MISTRAL_API_KEY
   
   # Linux/Mac
   echo $MISTRAL_API_KEY
   ```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ –∫–ª—é—á:
   ```bash
   export MISTRAL_API_KEY="–≤–∞—à_–Ω–æ–≤—ã–π_–∫–ª—é—á"
   ```
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á –Ω–∞ [Mistral AI Dashboard](https://console.mistral.ai/)

#### 2. –û—à–∏–±–∫–∞ 401 Unauthorized (–ë–∏—Ç—Ä–∏–∫—Å24)

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –ë–∏—Ç—Ä–∏–∫—Å24. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook URL –∏–ª–∏ —Ç–æ–∫–µ–Ω.
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç webhook URL
- –ò—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω –≤–µ–±—Ö—É–∫–∞
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤–µ–±—Ö—É–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç URL: `https://fineline.bitrix24.ru/rest/6/<token>/crm.item.add`
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –≤–µ–±—Ö—É–∫ –≤ –ë–∏—Ç—Ä–∏–∫—Å24:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º ‚Üí –î—Ä—É–≥–∏–µ ‚Üí –í—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω—ã –ø—Ä–∞–≤–∞: **CRM** (–º–∏–Ω–∏–º—É–º)
3. –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### 3. –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

**–°–∏–º–ø—Ç–æ–º—ã:**
```
ModuleNotFoundError: No module named 'sqlalchemy'
# –∏–ª–∏
OperationalError: could not connect to server
# –∏–ª–∏
–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ SQL –∑–∞–ø—Ä–æ—Å–∞
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- SQLAlchemy –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `DICTIONARIES_DB_URL`
- –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `bitrix24_dictionaries`

**–†–µ—à–µ–Ω–∏–µ:**

**–ï—Å–ª–∏ SQLAlchemy –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:**
```bash
pip install -r requirements.txt
# –∏–ª–∏
pip install SQLAlchemy==2.0.37
```

**–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç URL –¥–ª—è –≤–∞—à–µ–π –ë–î:
   ```bash
   # PostgreSQL
   postgresql://user:password@host:port/dbname
   
   # MySQL
   mysql+pymysql://user:password@host:port/dbname
   
   # MS SQL Server
   mssql+pyodbc://user:password@host:port/dbname?driver=ODBC+Driver+17+for+SQL+Server
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ë–î:
   ```bash
   # PostgreSQL
   psql -h host -U user -d dbname
   
   # MySQL
   mysql -h host -u user -p dbname
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã:
   ```sql
   SELECT column_name, data_type 
   FROM information_schema.columns 
   WHERE table_name = 'bitrix24_dictionaries';
   ```
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ:
   ```sql
   SELECT COUNT(*) FROM bitrix24_dictionaries;
   SELECT * FROM bitrix24_dictionaries LIMIT 5;
   ```

**–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –û—Ç–∫–ª—é—á–∏—Ç–µ –ë–î –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback-—Å–ª–æ–≤–∞—Ä–∏:
```bash
export USE_DB_DICTIONARIES=0
```

#### 4. –û—à–∏–±–∫–∞ "–ù–µ –Ω–∞–π–¥–µ–Ω ID –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞" / "–ù–µ –Ω–∞–π–¥–µ–Ω ID –¥–ª—è —Ç–∏–ø–∞ –ø–æ–∫—Ä—ã—Ç–∏—è"

**–°–∏–º–ø—Ç–æ–º—ã:**
```
WARNING: –ù–µ –Ω–∞–π–¥–µ–Ω ID –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞: 'FR4'
WARNING: –ù–µ –Ω–∞–π–¥–µ–Ω ID –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–ª–æ–µ–≤: '4'
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ó–Ω–∞—á–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
- –ù–µ–≤–µ—Ä–Ω—ã–π `param_id` (IBLOCK_ID) –≤ –∑–∞–ø—Ä–æ—Å–µ
- –ü—Ä–æ–±–ª–µ–º—ã —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ç–µ–∫—Å—Ç–∞ (—Ä–µ–≥–∏—Å—Ç—Ä, –ø—Ä–æ–±–µ–ª—ã, –¥–µ—Ñ–∏—Å—ã)

**–†–µ—à–µ–Ω–∏–µ:**

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ë–î (–ø—Ä–æ–¥–∞–∫—à–µ–Ω):**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ë–î:
   ```sql
   SELECT * FROM bitrix24_dictionaries 
   WHERE param_id = 56  -- –¥–ª—è Materials
   AND LOWER(REPLACE(REPLACE(item, '-', ''), ' ', '')) LIKE '%fr4%';
   ```
2. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:
   - –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ –ë–î (–ë–î –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –ë–∏—Ç—Ä–∏–∫—Å24)
   - –ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –≤ fallback-—Å–ª–æ–≤–∞—Ä—å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `param_id`:
   - Materials: `param_id = 56`
   - Finish Type: `param_id = 74`
   - No of Layers: `param_id = 54`
   - Max Copper: `param_id = 62`
4. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à (–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL)

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ fallback-—Å–ª–æ–≤–∞—Ä–∏ (–ª–æ–∫–∞–ª—å–Ω–æ):**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `app/bitrix24_dictionaries.py`
2. –ù–∞–π–¥–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–ª–æ–≤–∞—Ä—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `MATERIALS_DICT`)
3. –î–æ–±–∞–≤—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ:
   ```python
   MATERIALS_DICT: Dict[str, int] = {
       "FR4": 6281,
       "FR-4": 6281,  # –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ
       "–í–∞—à–µ–ù–æ–≤–æ–µ–ó–Ω–∞—á–µ–Ω–∏–µ": —Ä–µ–∞–ª—å–Ω—ã–π_ID_–∏–∑_–ë–∏—Ç—Ä–∏–∫—Å24,
   }
   ```
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### 5. –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –ë–∏—Ç—Ä–∏–∫—Å24

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ –ë–∏—Ç—Ä–∏–∫—Å24: –û—à–∏–±–∫–∞ –ë–∏—Ç—Ä–∏–∫—Å24: [–æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏]
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- –ù–µ–≤–µ—Ä–Ω—ã–µ ID —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ë–î)
- –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–æ–∫–∞ –≤–º–µ—Å—Ç–æ —á–∏—Å–ª–∞)
- –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª–µ–π –≤ –ë–∏—Ç—Ä–∏–∫—Å24

**–†–µ—à–µ–Ω–∏–µ:**
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - –∫–∞–∫–∏–µ –ø–æ–ª—è –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã:
   ```bash
   # –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª logs.log
   tail -f logs.log
   ```
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**
   ```bash
   # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ID —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ë–î
   SELECT * FROM bitrix24_dictionaries 
   WHERE item_id IN (5256, 6610, 6014, 6270);
   ```
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:**
   - `iblock_element` –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **int** (ID —ç–ª–µ–º–µ–Ω—Ç–∞)
   - `double` –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **—á–∏—Å–ª–∞–º–∏** (–Ω–µ —Å—Ç—Ä–æ–∫–∞–º–∏)
   - `string` –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **—Å—Ç—Ä–æ–∫–∞–º–∏**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –≤—Å–µ 12 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (—Å–º. —Ä–∞–∑–¥–µ–ª "–ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π")
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook URL –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**

**–û—Ç–ª–∞–¥–∫–∞:**
–°–∫–∞—á–∞–π—Ç–µ "JSON –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24" –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –µ–≥–æ –≤—Ä—É—á–Ω—É—é:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
cat —Ñ–∞–π–ª_bitrix24.json | python -m json.tool

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é
curl -X POST 'https://fineline.bitrix24.ru/rest/6/<token>/crm.item.add' \
  -H 'Content-Type: application/json' \
  -d @—Ñ–∞–π–ª_bitrix24.json
```

#### 6. –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ Excel —Ñ–∞–π–ª–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Error reading Excel file: [–æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏]
# –∏–ª–∏
–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ø–ª–∞—Ç—ã
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π Excel —Ñ–∞–π–ª
- –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç (.xls —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç)
- –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ —è—á–µ–π–∫–∞—Ö

**–†–µ—à–µ–Ω–∏–µ:**
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:**
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: `.xlsx` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏ `.xls`
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ Excel –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫ `.xlsx`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –ø—É—Å—Ç–æ–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –≤–∏–¥–∏–º—ã—Ö –ª–∏—Å—Ç–∞—Ö
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ä–∞–∑–º–µ—Ä–æ–≤:**
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã: `100x50`, `100 x 50`, `100√ó50`
   - –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç –¥—Ä—É–≥–æ–π, —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å, –Ω–æ –º–æ–∂–µ—Ç –Ω–µ —É—Å–ø–µ—Ç—å
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫—É:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç UTF-8 –∏–ª–∏ Windows-1251

#### 7. –û—à–∏–±–∫–∞ "Service temporarily unavailable" (Mistral AI)

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Service temporarily unavailable due to high demand. Please try again later.
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Mistral AI (rate limiting)
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–ø—ã—Ç–∫—É
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –≤–∞—à–µ–≥–æ API –∫–ª—é—á–∞ –Ω–∞ [Mistral AI Dashboard](https://console.mistral.ai/)
3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)
4. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –æ–±–Ω–æ–≤–∏—Ç–µ API –∫–ª—é—á –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π —Ç–∞—Ä–∏—Ñ

#### 8. –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π

**–°–∏–º–ø—Ç–æ–º—ã:**
```
ModuleNotFoundError: No module named 'app.bitrix24'
ImportError: cannot import name 'bitrix24_defaults'
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:
   ```bash
   # –ü—Ä–∞–≤–∏–ª—å–Ω–æ
   cd LLM-parser-PCB
   fastapi run main.py
   
   # –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
   cd app
   python interface.py
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–∞–ø–∫–∞ `app/` —Å –º–æ–¥—É–ª—è–º–∏)

### –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—Ç–ª–∞–¥–∫–µ

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   # –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª logs.log
   tail -f logs.log
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   # Windows PowerShell
   Get-ChildItem Env: | Where-Object {$_.Name -like "*MISTRAL*" -or $_.Name -like "*BITRIX*" -or $_.Name -like "*DICTIONARIES*"}
   
   # Linux/Mac
   env | grep -E "(MISTRAL|BITRIX|DICTIONARIES)"
   ```

3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Ç–¥–µ–ª—å–Ω–æ:**
   ```python
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
   python -c "from app.db_dictionaries import get_db_dictionaries; print(get_db_dictionaries())"
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
   python -c "from app import bitrix24_dictionaries; print(bitrix24_dictionaries.get_material_id('FR4'))"
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   python -c "from app.config import bitrix24_defaults; print(bitrix24_defaults)"
   ```

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏:**
   - –õ–æ–≥–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–∏—à—É—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ DEBUG
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `logs.log` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—à–∏–±–∫–∞ "–ù–µ –Ω–∞–π–¥–µ–Ω ID –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞" / "–ù–µ –Ω–∞–π–¥–µ–Ω ID –¥–ª—è —Ç–∏–ø–∞ –ø–æ–∫—Ä—ã—Ç–∏—è"

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ (–Ω–∏ –≤ –ë–î, –Ω–∏ –≤ fallback-—Å–ª–æ–≤–∞—Ä—è—Ö)

**–†–µ—à–µ–Ω–∏–µ:**

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ë–î (–ø—Ä–æ–¥–∞–∫—à–µ–Ω):**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `bitrix24_dictionaries`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `param_id` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞ (—Ä–µ–≥–∏—Å—Ç—Ä, –ø—Ä–æ–±–µ–ª—ã, –¥–µ—Ñ–∏—Å—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è)
4. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∏–ª–∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL)

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ fallback-—Å–ª–æ–≤–∞—Ä–∏ (–ª–æ–∫–∞–ª—å–Ω–æ):**
1. –î–æ–±–∞–≤—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–ª–æ–≤–∞—Ä—å –≤ `app/bitrix24_dictionaries.py`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ID —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é –≤ –ë–∏—Ç—Ä–∏–∫—Å24

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:**
```sql
SELECT * FROM bitrix24_dictionaries 
WHERE param_id = 56 AND LOWER(REPLACE(item, '-', '')) LIKE '%fr4%';
```

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –ë–∏—Ç—Ä–∏–∫—Å24

**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–µ ID —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - –∫–∞–∫–∏–µ –ø–æ–ª—è –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`BITRIX24_DEFAULT_*`) —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ë–î
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç webhook URL
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–µ–±—Ö—É–∫ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ CRM

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º —Ä–∞–∑–º–µ—Ä–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Excel

**–†–µ—à–µ–Ω–∏–µ:**
- –°–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –∏–∑ —Å—Ç—Ä–æ–∫ —Ç–∏–ø–∞ "100x50" –∏–ª–∏ "100 x 50"
- –ï—Å–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ —É–¥–∞–ª—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –∏—Å—Ö–æ–¥–Ω–æ–º Excel —Ñ–∞–π–ª–µ

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

- **`app/model.py`** - Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ LLM
- **`app/utils.py`** - –§—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ LLM
- **`app/bitrix24.py`** - REST API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24
- **`app/bitrix24_dictionaries.py`** - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ ID
- **`app/interface.py`** - Gradio –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **`app/config.py`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

1. –û–±–Ω–æ–≤–∏—Ç–µ –º–æ–¥–µ–ª—å –≤ `app/model.py`
2. –î–æ–±–∞–≤—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –≤ `app/bitrix24.py` ‚Üí `map_pcb_to_bitrix24_fields()`
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤ `app/bitrix24_dictionaries.py`

## –õ–∏—Ü–µ–Ω–∑–∏—è

–°–º. —Ñ–∞–π–ª LICENSE

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/kornelikkk2/LLM-parser-PCB-v3

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- Mistral AI –∑–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏
- Gradio –∑–∞ —É–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- FastAPI –∑–∞ –±—ã—Å—Ç—Ä—ã–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
