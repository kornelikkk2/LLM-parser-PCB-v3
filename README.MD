# LLM-Parser: –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–µ—á–∞—Ç–Ω—ã—Ö –ø–ª–∞—Ç

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–µ—á–∞—Ç–Ω—ã—Ö –ø–ª–∞—Ç –∏–∑ Excel —Ñ–∞–π–ª–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π (LLM) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –ë–∏—Ç—Ä–∏–∫—Å24.

## –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Mistral AI –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –ø–µ—á–∞—Ç–Ω—ã—Ö –ø–ª–∞—Ç–∞—Ö –∏–∑ –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö Excel —Ñ–∞–π–ª–æ–≤. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –≤ –ë–∏—Ç—Ä–∏–∫—Å24 —á–µ—Ä–µ–∑ REST API –∏ —ç–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM (Mistral AI) –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel
- üìä **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞** - CSV, XLSX, JSON
- üîó **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ REST API
- üì¶ **JSON –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24** - –ì–æ—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Ä—É—á–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- üóÇÔ∏è **–ú–∞–ø–ø–∏–Ω–≥ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ ID —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
- üåê **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –£–¥–æ–±–Ω—ã–π Gradio –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
LLM-parser-PCB/
‚îú‚îÄ‚îÄ main.py                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ README.MD                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .gitignore                   # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
‚îÇ
‚îî‚îÄ‚îÄ app/                         # –ú–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ config.py                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (API –∫–ª—é—á–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
    ‚îú‚îÄ‚îÄ model.py                 # Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
    ‚îú‚îÄ‚îÄ utils.py                 # –§—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ Excel
    ‚îú‚îÄ‚îÄ logger.py                # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    ‚îú‚îÄ‚îÄ interface.py             # Gradio –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    ‚îú‚îÄ‚îÄ bitrix24.py              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24 REST API
    ‚îî‚îÄ‚îÄ bitrix24_dictionaries.py # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ –ø–æ–ª–µ–π
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- API –∫–ª—é—á Mistral AI
- Webhook URL –∏–ª–∏ —Ç–æ–∫–µ–Ω –ë–∏—Ç—Ä–∏–∫—Å24 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/kornelikkk2/LLM-parser-PCB-v3.git
cd LLM-parser-PCB-v3
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

**Linux/Mac:**
```bash
python -m venv venv
source venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Windows (cmd):**
```cmd
set MISTRAL_API_KEY=–≤–∞—à_–∫–ª—é—á_mistral_ai
set BITRIX24_WEBHOOK_URL=https://fineline.bitrix24.ru/rest/6/–≤–∞—à_—Ç–æ–∫–µ–Ω/crm.item.add
```

**Windows (PowerShell):**
```powershell
$env:MISTRAL_API_KEY="–≤–∞—à_–∫–ª—é—á_mistral_ai"
$env:BITRIX24_WEBHOOK_URL="https://fineline.bitrix24.ru/rest/6/–≤–∞—à_—Ç–æ–∫–µ–Ω/crm.item.add"
```

**Linux/Mac:**
```bash
export MISTRAL_API_KEY=–≤–∞—à_–∫–ª—é—á_mistral_ai
export BITRIX24_WEBHOOK_URL=https://fineline.bitrix24.ru/rest/6/–≤–∞—à_—Ç–æ–∫–µ–Ω/crm.item.add
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ Git):
```
MISTRAL_API_KEY=–≤–∞—à_–∫–ª—é—á_mistral_ai
BITRIX24_WEBHOOK_URL=https://fineline.bitrix24.ru/rest/6/–≤–∞—à_—Ç–æ–∫–µ–Ω/crm.item.add
```

### 5. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

#### Mistral AI API Key
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Mistral AI](https://mistral.ai/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª API Keys
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ

#### –ë–∏—Ç—Ä–∏–∫—Å24 Webhook URL
1. –í–æ–π–¥–∏—Ç–µ –≤ –ë–∏—Ç—Ä–∏–∫—Å24 –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º ‚Üí –î—Ä—É–≥–∏–µ ‚Üí –í—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫**
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –≤–µ–±—Ö—É–∫:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: –Ω–∞–ø—Ä–∏–º–µ—Ä, "PCB Parser"
   - –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ (–º–∏–Ω–∏–º—É–º: CRM)
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π URL (—Ñ–æ—Ä–º–∞—Ç: `https://fineline.bitrix24.ru/rest/6/<token>/crm.item.add`)

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: FastAPI CLI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
fastapi run main.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Uvicorn

```bash
uvicorn main:app
```

### –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** http://localhost:8000/
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:8000/docs

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ü–∞—Ä—Å–∏–Ω–≥ Excel —Ñ–∞–π–ª–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8000/
2. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–≥—Ä—É–∑–∏—Ç—å Excel —Ñ–∞–π–ª"** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª (.xlsx –∏–ª–∏ .xls)
3. –ù–∞–∂–º–∏—Ç–µ **"–ü–∞—Ä—Å–∏—Ç—å Excel –¥–∞–Ω–Ω—ã–µ"**
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è LLM)

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- **–¢–∞–±–ª–∏—Ü—É** —Å —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- **–ö–Ω–æ–ø–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è** –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–æ–≤:
  - CSV
  - XLSX
  - JSON (–æ–±—â–∏–π —Ñ–æ—Ä–º–∞—Ç)
  - **JSON –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24** (–≥–æ—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏)

### 3. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –ë–∏—Ç—Ä–∏–∫—Å24

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `BITRIX24_WEBHOOK_URL`
2. –ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞–∂–º–∏—Ç–µ **"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –ë–∏—Ç—Ä–∏–∫—Å24"**
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞

#### –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

1. –°–∫–∞—á–∞–π—Ç–µ **"JSON –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24"**
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑:
   - Postman
   - curl
   - –î—Ä—É–≥–æ–π HTTP –∫–ª–∏–µ–Ω—Ç

**–ü—Ä–∏–º–µ—Ä curl:**
```bash
curl --location 'https://fineline.bitrix24.ru/rest/6/<token>/crm.item.add' \
--header 'Content-Type: application/json' \
--data @–ø—É—Ç—å_–∫_—Ñ–∞–π–ª—É_bitrix24.json
```

## –ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–µ—á–∞—Ç–Ω—ã—Ö –ø–ª–∞—Ç:

- **–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏** - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –ø–ª–∞—Ç—ã
- **–ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—á–∞—Ç–Ω–æ–π –ø–ª–∞—Ç—ã** - –ò–º—è/–Ω–æ–º–µ—Ä –ø–ª–∞—Ç—ã
- **–ú–∞—Ç–µ—Ä–∏–∞–ª –æ—Å–Ω–æ–≤–∞–Ω–∏—è** - –¢–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (FR4, FR-4 –∏ —Ç.–¥.)
- **–¢–æ–ª—â–∏–Ω–∞ —Ñ–æ–ª—å–≥–∏** - –¢–æ–ª—â–∏–Ω–∞ –º–µ–¥–Ω–æ–≥–æ —Å–ª–æ—è
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–µ–≤** - –ß–∏—Å–ª–æ —Å–ª–æ–µ–≤ –ø–ª–∞—Ç—ã
- **–†–∞–∑–º–µ—Ä –ø–ª–∞—Ç—ã** - –î–ª–∏–Ω–∞ –∏ —à–∏—Ä–∏–Ω–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥)
- **–¢–æ–ª—â–∏–Ω–∞ –ø–ª–∞—Ç—ã** - –¢–æ–ª—â–∏–Ω–∞ –≤ –º–º
- **–ü–∞–Ω–µ–ª–∏–∑–∞—Ü–∏—è** - –†–∞–∑–º–µ—Ä—ã –ø–∞–Ω–µ–ª–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥)
- **–§–∏–Ω–∏—à–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** - –¢–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è (HASL, ENIG –∏ —Ç.–¥.)
- **–¶–≤–µ—Ç –ø–∞—è–ª—å–Ω–æ–π –º–∞—Å–∫–∏** - –¶–≤–µ—Ç –º–∞—Å–∫–∏
- **–ú–µ—Ç–∞–ª–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∞—è** - –ù–∞–ª–∏—á–∏–µ –º–µ—Ç–∞–ª–ª–∏–∑–∞—Ü–∏–∏
- –ò –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24

### –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π

–ü—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç –ø–æ–ª–µ–π –ë–∏—Ç—Ä–∏–∫—Å24:

| –ü–æ–ª–µ PCB | –ü–æ–ª–µ –ë–∏—Ç—Ä–∏–∫—Å24 | –¢–∏–ø |
|----------|----------------|-----|
| `board_name` | `ufCrm24_1709799376061` (OEM PN) | string |
| `base_material` | `ufCrm24_1707838248` (Materials) | iblock_element |
| `layer_count` | `ufCrm24_1709815185` (No of Layers) | iblock_element |
| `coverage_type` | `ufCrm24_1707768819` (Finish Type) | iblock_element |
| `foil_thickness` | `ufCrm24_1707838441` (Max Copper) | iblock_element |
| `board_size` | `ufCrm24_1708353384301` (Length), `ufCrm24_1708353402068` (Width) | double |
| `panelization` | `ufCrm24_1708375852081` (Panel Length), `ufCrm24_1708375871512` (Panel Width) | double |

### –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

–î–ª—è –ø–æ–ª–µ–π —Ç–∏–ø–∞ `iblock_element` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (`app/bitrix24_dictionaries.py`), –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ ID —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ –ë–∏—Ç—Ä–∏–∫—Å24.

**–ü—Ä–∏–º–µ—Ä:**
- –¢–µ–∫—Å—Ç: "FR4" ‚Üí ID: 6281 (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ Materials, IBLOCK_ID = 56)
- –¢–µ–∫—Å—Ç: "HASL" ‚Üí ID: 7010 (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ Finish Type, IBLOCK_ID = 74)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ ID –∏–∑ –ë–∏—Ç—Ä–∏–∫—Å24:

1. –ü–æ–ª—É—á–∏—Ç–µ ID —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ REST API:
   ```
   GET /rest/{user_id}/{token}/lists.element.get?IBLOCK_TYPE_ID=lists&IBLOCK_ID={IBLOCK_ID}
   ```

2. –û–±–Ω–æ–≤–∏—Ç–µ —Å–ª–æ–≤–∞—Ä–∏ –≤ `app/bitrix24_dictionaries.py`:
   ```python
   MATERIALS_DICT = {
       "FR4": 6281,  # —Ä–µ–∞–ª—å–Ω—ã–π ID –∏–∑ –ë–∏—Ç—Ä–∏–∫—Å24
       "FR-4": 6281,
       # –¥–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
   }
   ```

## –§–æ—Ä–º–∞—Ç JSON –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON —Ñ–∞–π–ª –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç:

```json
{
  "entityTypeId": 182,
  "fields": {
    "ufCrm24_1709799376061": "OEM-12345",
    "ufCrm24_1707768819": 7010,
    "ufCrm24_1707838248": 6281,
    "ufCrm24_1709815185": 6784,
    "ufCrm24_1708374728464": 1.6,
    "ufCrm24_1708353384301": 150.0,
    "ufCrm24_1708353402068": 100.0
  }
}
```

–≠—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç –≥–æ—Ç–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –ë–∏—Ç—Ä–∏–∫—Å24 —á–µ—Ä–µ–∑ REST API –º–µ—Ç–æ–¥ `crm.item.add`.

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ 401 Unauthorized (Mistral AI)

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π API –∫–ª—é—á Mistral AI

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `MISTRAL_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∏ –Ω–µ –∏—Å—Ç–µ–∫
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

### –û—à–∏–±–∫–∞ 401 Unauthorized (–ë–∏—Ç—Ä–∏–∫—Å24)

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π webhook URL –∏–ª–∏ —Ç–æ–∫–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç webhook URL: `https://fineline.bitrix24.ru/rest/6/<token>/crm.item.add`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–µ–±—Ö—É–∫ –Ω–µ –∏—Å—Ç–µ–∫ (—Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤–µ–±—Ö—É–∫–∞ (–¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ CRM)

### –û—à–∏–±–∫–∞ "–ù–µ –Ω–∞–π–¥–µ–Ω ID –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞"

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤ `app/bitrix24_dictionaries.py`
2. –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ ID —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –µ—Å–ª–∏ –æ–Ω–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –ë–∏—Ç—Ä–∏–∫—Å24

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º —Ä–∞–∑–º–µ—Ä–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Excel

**–†–µ—à–µ–Ω–∏–µ:**
- –°–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –∏–∑ —Å—Ç—Ä–æ–∫ —Ç–∏–ø–∞ "100x50" –∏–ª–∏ "100 x 50"
- –ï—Å–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ —É–¥–∞–ª—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –∏—Å—Ö–æ–¥–Ω–æ–º Excel —Ñ–∞–π–ª–µ

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

- **`app/model.py`** - Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ LLM
- **`app/utils.py`** - –§—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ LLM
- **`app/bitrix24.py`** - REST API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24
- **`app/bitrix24_dictionaries.py`** - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ ID
- **`app/interface.py`** - Gradio –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **`app/config.py`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

1. –û–±–Ω–æ–≤–∏—Ç–µ –º–æ–¥–µ–ª—å –≤ `app/model.py`
2. –î–æ–±–∞–≤—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –≤ `app/bitrix24.py` ‚Üí `map_pcb_to_bitrix24_fields()`
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤ `app/bitrix24_dictionaries.py`

## –õ–∏—Ü–µ–Ω–∑–∏—è

–°–º. —Ñ–∞–π–ª LICENSE

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/kornelikkk2/LLM-parser-PCB-v3

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- Mistral AI –∑–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏
- Gradio –∑–∞ —É–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- FastAPI –∑–∞ –±—ã—Å—Ç—Ä—ã–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
